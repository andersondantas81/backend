{"version":3,"sources":["../../src/server.js"],"names":["app","use","server","require","Server","io","on","socket","join","box","mongoose","connect","useNewUrlParser","useUnifiedTopology","req","res","next","express","json","urlencoded","extended","static","path","resolve","__dirname","listen","process","env","PORT"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,MAAM,wBAAZ;AACA;AACAA,IAAIC,GAAJ,CAAQ,qBAAR;;AAEA,IAAMC,SAASC,QAAQ,MAAR,EAAgBC,MAAhB,CAAuBJ,GAAvB,CAAf;AACA,IAAMK,KAAKF,QAAQ,WAAR,EAAqBD,MAArB,CAAX;;AAEAG,GAAGC,EAAH,CAAM,YAAN,EAAoB,kBAAU;AAC5BC,SAAOD,EAAP,CAAU,aAAV,EAAyB,eAAO;AAC9BC,WAAOC,IAAP,CAAYC,GAAZ;AACD,GAFD;AAGD,CAJD;;AAMAC,mBAASC,OAAT,CACE,qGADF,EAEE;AACEC,mBAAiB,IADnB;AAEEC,sBAAoB;AAFtB,CAFF;;AAQAb,IAAIC,GAAJ,CAAQ,UAACa,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC1BF,MAAIT,EAAJ,GAASA,EAAT;;AAEA,SAAOW,MAAP;AACD,CAJD;;AAMAhB,IAAIC,GAAJ,CAAQgB,kBAAQC,IAAR,EAAR;AACAlB,IAAIC,GAAJ,CAAQgB,kBAAQE,UAAR,CAAmB,EAAEC,UAAU,IAAZ,EAAnB,CAAR;AACApB,IAAIC,GAAJ,CAAQ,QAAR,EAAkBgB,kBAAQI,MAAR,CAAeC,eAAKC,OAAL,CAAaC,SAAb,EAAwB,IAAxB,EAA8B,KAA9B,CAAf,CAAlB;;AAEAxB,IAAIC,GAAJ,CAAQE,QAAQ,UAAR,CAAR;;AAEAD,OAAOuB,MAAP,CAAcC,QAAQC,GAAR,CAAYC,IAAZ,IAAoB,IAAlC","file":"server.js","sourcesContent":["import express from \"express\";\r\nimport mongoose from \"mongoose\";\r\nimport path from \"path\";\r\nimport cors from \"cors\";\r\n\r\nconst app = express();\r\n//todo mundo pode acessa a aplicação.\r\napp.use(cors());\r\n\r\nconst server = require(\"http\").Server(app);\r\nconst io = require(\"socket.io\")(server);\r\n\r\nio.on(\"connection\", socket => {\r\n  socket.on(\"connectRoom\", box => {\r\n    socket.join(box);\r\n  });\r\n});\r\n\r\nmongoose.connect(\r\n  \"mongodb+srv://omnistack:omnistack@cluster0-7zpqg.mongodb.net/omnistack6?retryWrites=true&w=majority\",\r\n  {\r\n    useNewUrlParser: true,\r\n    useUnifiedTopology: true\r\n  }\r\n);\r\n\r\napp.use((req, res, next) => {\r\n  req.io = io;\r\n\r\n  return next();\r\n});\r\n\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: true }));\r\napp.use(\"/files\", express.static(path.resolve(__dirname, \"..\", \"tmp\")));\r\n\r\napp.use(require(\"./routes\"));\r\n\r\nserver.listen(process.env.PORT || 3030);\r\n"]}